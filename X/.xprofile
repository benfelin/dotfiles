#/bin/sh

export PATH="${HOME}/.local/bin:${PATH}"

COMPOSITOR=picom
BATT=""
OS=$(uname)

case $OS in
Linux)
    COMPOSITOR=compton
    acpi -l && BATT="$(acpi -l | grep "Battery 0" | awk '{ print $4}')"
    ;;
FreeBSD)
    test `apm -l` = "0" || BATT="$(apm -l)%"
    ;;
OpenBSD)
    test `apm -l` = "0" || BATT="$(apm -l)%"
    ;;
*)
    ;;
esac

battery-status.sh &

# Statusbar loop
while true; do
   xsetroot -name "$(date +"%c") | $(echo $BATT)"
   sleep 60
done &

xrdb $HOME/.Xdefaults &
xscreensaver -no-splash &
xsetroot -solid gray44 &

sxhkd &
$HOME/.local/bin/mutx &

eval $COMPOSITOR -b &

exec dwm
