#/bin/sh

export PATH="${HOME}/.local/bin:${PATH}"

COMPOSITOR=picom
BATT=""
# TODO laptop/desktop? Linux/OpenBSD/FreeBSD? -> uname
OS=$(uname)
case $OS in
Linux)
    COMPOSITOR=compton
#is it a laptop? && get remainig battery in $BATT
    ;;
FreeBSD)
#  is it a laptop? && get remainig battery in $BATT
    BATT=" | $(apm -l)"
    ;;
OpenBSD)
#  is it a laptop? && get remainig battery in $BATT
    ;;
*)
    ;;
esac

$HOME/.local/bin/battery-status.sh &

# Statusbar loop
while true; do
   xsetroot -name "$( date +"%c" )$( echo $BATT)"
   sleep 60
done &

xrdb $HOME/.Xdefaults &
xscreensaver -no-splash &
xsetroot -solid gray44 &

sxhkd &
$HOME/.local/bin/mutx &

eval $COMPOSITOR -b &

exec dwm
